SET FOREIGN_KEY_CHECKS=0;
DROP TABLE IF EXISTS books;
DROP TABLE IF EXISTS departments;
DROP TABLE IF EXISTS customer;
DROP TABLE IF EXISTS account;
DROP TABLE IF EXISTS employee;

CREATE TABLE books(
    id INTEGER NOT NULL AUTO_INCREMENT,
    bookname VARCHAR(512) NOT NULL,
    author VARCHAR (512) NOT NULL,
    genre VARCHAR (512),
    ageRating VARCHAR(5),
    PRIMARY KEY (id),
    FOREIGN KEY (genre) REFERENCES departments(name) ON DELETE CASCADE
    );

CREATE TABLE departments(
    name VARCHAR(512) NOT NULL,
    manager VARCHAR(512) NOT NULL,
    booksnum INTEGER NOT NULL,
    PRIMARY KEY (name)
    );

CREATE TABLE account(
    username VARCHAR(512) NOT NULL,
    password VARCHAR (12) NOT NULL,
    type VARCHAR(30) NOT NULL,
    PRIMARY KEY (username)
);

CREATE TABLE customer(
    id INTEGER NOT NULL AUTO_INCREMENT,
    username VARCHAR (512) NOT NULL,
    firstname VARCHAR(512) NOT NULL,
    surname VARCHAR (512) NOT NULL,
    age INTEGER,
    favgenres VARCHAR (512),
    PRIMARY KEY (id),
    FOREIGN KEY (username) REFERENCES account(username) ON DELETE CASCADE
    );

CREATE TABLE employee(
    id INTEGER NOT NULL AUTO_INCREMENT,
    username VARCHAR (512) NOT NULL,
    firstname VARCHAR(512) NOT NULL,
    lastname VARCHAR (512) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (username) REFERENCES account(username) ON DELETE CASCADE
    );

